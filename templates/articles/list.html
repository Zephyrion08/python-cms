{% extends "base.html" %}
{% block content %}

<h2>Articles</h2>

<a href="{% url 'article_create' %}" class="btn">+ Add Article</a>



<table class="log-table">
<tr>

    <th>Title</th>
    <th>Status</th>
    <th>Homepage</th>
    <th>Actions</th>
</tr>

{% for a in articles %}
<tr>

    <td>
        <strong>{{ a.title }}</strong><br>
        <small>{{ a.slug }}</small>
    </td>

    <td id="status-{{ a.id }}" class="{% if a.is_active %}status-active{% else %}status-inactive{% endif %}">
        {{ a.is_active|yesno:"Active,Inactive" }}
    </td>

    <td>
        {% if a.show_on_homepage %}
            <span class="badge badge-green">Yes</span>
        {% else %}
            <span class="badge badge-gray">No</span>
        {% endif %}
    </td>

    <td class="actions">
        <span class="status-toggle"
              data-url="{% url 'toggle_status' 'article' a.id %}"
              data-target="status-{{ a.id }}"
              onclick="event.preventDefault(); toggleStatus(this)"
              title="Toggle status">
            <i class="fa-solid {% if a.is_active %}fa-toggle-on{% else %}fa-toggle-off{% endif %}"></i>
        </span>

        <a href="{% url 'article_edit' a.id %}" class="icon edit" title="Edit">
            <i class="fa-solid fa-pen-to-square"></i> |
        </a>

        <span class="icon delete"
              title="Delete"
              onclick="openDeleteModal('{{ a.title }}', '{% url 'article_delete' a.id %}')">
            <i class="fa-solid fa-trash"></i>
        </span>
    </td>
</tr>
{% endfor %}

</table>

<form style="display:none;">
    {% csrf_token %}
</form>

{% endblock %}
